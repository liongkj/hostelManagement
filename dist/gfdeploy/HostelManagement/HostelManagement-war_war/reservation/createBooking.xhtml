<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <title>Facelet Title</title>
    </h:head>
    <h:body>
        <ui:include src="/reservation/header.xhtml"/>

        <h:form id="form">
            <p:growl id="customerMsgs" showDetail="true" />

            <p:panel header="Select a Customer" style="margin-bottom:10px;">
                <h:panelGrid columns="3" cellpadding="5">
                    <p:outputLabel for="cusName" value="Customer Name: " />
                    <p:selectOneMenu id="cusName" required="true" validatorMessage="Please select a customer." value="#{bookingBean.name}" style="width:150px">
                        <f:selectItem itemLabel="-" itemValue="-" noSelectionOption="true" />
                        <f:selectItems value="#{bookingBean.guestList}" var="cus" itemLabel="#{cus.name}"/>
                    </p:selectOneMenu>
                    <p:commandButton id="submitCus" value="Check" process="@this,cusName" update="customerMsgs" icon="ui-icon-check" />
                </h:panelGrid>

            </p:panel>

            <p:panel header="Select Date" style="margin-bottom:10px;">
                <p:growl id="bookingMsgs" showDetail="true" />

                <h:panelGrid id="grid" columns="3" cellpadding="5">
                    <p:outputLabel for="fNight" value="Check in Date:" />
                    <p:calendar required="true" requiredMessage="Please enter check in date." id="fNight" navigator="true" pattern="dd/MM/yyyy" value="#{bookingBean.firstNight}" mindate="#{bookingBean.min1}">
                        <p:ajax event="dateSelect" update="lNight" />
                    </p:calendar>
                    <p:column/>
                    <p:outputLabel for="lNight" value="Check out Date:" />
                    <p:calendar required="true" requiredMessage="Please Enter check out date." id="lNight" navigator="true" pattern="dd/MM/yyyy" value="#{bookingBean.lastNight}" mindate="#{bookingBean.min2}"/>
                    <p:commandButton id="submitAvailability" actionListener="#{bookingBean.listBookings}" process="@this fNight lNight" value="Check Room Availability" update="bookingMsgs room" icon="ui-icon-check" />
                </h:panelGrid>

            </p:panel>

            <p:panel id="roomPanel"  header="Select Room" style="margin-bottom:10px;">
                <p:outputLabel for="room" value="Rooms: " />
                <p:selectOneMenu id="room" value="#{bookingBean.selectedRoom}">
                    <f:selectItem itemLabel="Select One" itemValue="" />
                    <f:selectItems value="#{bookingBean.rooms}" var="r" itemLabel="#{r.id}" />
                </p:selectOneMenu>
            </p:panel>

            <p:commandButton value="Submit" style="float:right"/>

        </h:form>

    </h:body>
</html>

